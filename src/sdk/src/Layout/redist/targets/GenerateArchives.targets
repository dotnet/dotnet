<Project>

  <Target Name="GenerateArchives"
          DependsOnTargets="GenerateInstallerLayout"
          AfterTargets="AfterBuild">
    <!-- Ensure output directories are created -->
    <MakeDir Directories="$(ArtifactsShippingPackagesDir);$(ArtifactsNonShippingPackagesDir)" />

    <!-- Create .zip files on Windows -->
    <ZipFileCreateFromDirectory
        Condition=" '$(OSName)' == 'win' "
        SourceDirectory="$(RedistInstallerLayoutPath)"
        DestinationArchive="$(ArtifactsShippingPackagesDir)$(ArtifactNameWithVersionCombinedHostHostFxrFrameworkSdk).zip"
        OverwriteDestination="true" />

    <!-- Create .tar.gz files on all platforms -->
    <TarGzFileCreateFromDirectory
        SourceDirectory="$(RedistInstallerLayoutPath)"
        DestinationArchive="$(ArtifactsShippingPackagesDir)$(ArtifactNameWithVersionCombinedHostHostFxrFrameworkSdk).tar.gz"
        OverwriteDestination="true" />
  </Target>

</Project>
