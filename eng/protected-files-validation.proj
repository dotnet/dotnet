<Project Sdk="Microsoft.Build.Traversal">

    <PropertyGroup>
      <TargetFramework>$(NetCurrent)</TargetFramework>
    </PropertyGroup>

    <ItemGroup>
      <ProjectReference Include="$(TasksDir)Microsoft.DotNet.UnifiedBuild.Tasks\Microsoft.DotNet.UnifiedBuild.Tasks.csproj" />
    </ItemGroup>

    <UsingTask TaskName="Microsoft.DotNet.UnifiedBuild.Tasks.ProtectedFilesValidation" AssemblyFile="$(MicrosoftDotNetUnifiedBuildTasksAssembly)" TaskFactory="TaskHostFactory" />
    <Target Name="ProtectedFilesValidation"
            DependsOnTargets="ResolveProjectReferences"
            BeforeTargets="Build">
      <Error Condition="'$(PullRequestTargetBranch)' == ''" Text="PullRequestTargetBranch is not set." />
      <Error Condition="'$(PullRequestTitle)' == ''" Text="PullRequestTitle is not set." />

      <Microsoft.DotNet.UnifiedBuild.Tasks.ProtectedFilesValidation
        DotNetRootDirectory="$(RepoRoot)"
        PullRequestTargetBranch="$(PullRequestTargetBranch)"
        PullRequestTitle="$(PullRequestTitle)" />
    </Target>

  </Project>
